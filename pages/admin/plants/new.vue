<script setup lang="ts">
import { ref } from 'vue'
import { useRoute, useRouter } from '#app'


/**
 * Formulaire cr√©ation plante (admin)
 * Valide la SFC et cr√©e une plante
 * @form donn√©es du formulaire
 */
const router = useRouter()
const form = ref({ name: '', price: 0, description: '', stock: 0 })

async function handleSubmit() {
	await $fetch('/api/plants', { method: 'POST', body: form.value })
	router.push('/admin/plants')
}
</script>

<template>
	<div class="container mt-4">
		<h1>Nouvelle Plante üå±</h1>
		<form @submit.prevent="handleSubmit">
			<div class="mb-3"><label>Nom</label><input v-model="form.name" class="form-control" required /></div>
			<div class="mb-3"><label>Prix (‚Ç¨)</label><input v-model="form.price" type="number" class="form-control" required /></div>
			<div class="mb-3"><label>Description</label><textarea v-model="form.description" class="form-control" rows="4"></textarea></div>
			<div class="mb-3"><label>Stock</label><input v-model="form.stock" type="number" class="form-control" required /></div>
			<button class="btn btn-success">Cr√©er</button>
		</form>
	</div>
</template>
